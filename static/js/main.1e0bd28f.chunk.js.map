{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["React","constructor","props","super","this","viewBox","componentDidUpdate","prevProps","String","isEqual","componentDidMount","document","calculateBox","box","textEl","current","x","y","width","height","state","render","preserveAspectRatio","fullTextStyle","textStyle","className","style","ref","TextVice","children","PropTypes","svgStyle","textClassName","svgClassName","font","onFit","cropTop","cropBot","number","App","Component","handleChange","target","setState","name","value","text","spacing","fontFamily","letterSpacing","type","onChange","step","min","max","href","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.1e0bd28f.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { isEqual } from 'lodash'\n\nclass TextVice extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      viewBox: '0 0 1000 1000'\n    }\n    this.textEl = React.createRef()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (String(prevProps.children) !== String(this.props.children)) {\n      // Recalculate on text change\n      this.calculateBox()\n    } else if (!isEqual(prevProps.textStyle, this.props.textStyle)) {\n      // Recalculate on style change\n      this.calculateBox()\n    }\n  }\n\n  componentDidMount() {\n    this.calculateBox()\n\n    // If FontFace set is supported, recalculate when fonts have loaded\n    if (document.fonts) {\n      document.fonts.ready.then(() => {\n        this.calculateBox()\n      })\n    }\n  }\n\n  calculateBox() {\n    const box = this.textEl.current.getBBox()\n\n    // Crop vertically by given factor if passed\n    if (this.props.cropTop) {\n      box.y += box.height * this.props.cropTop\n      box.height -= box.height * this.props.cropTop\n    }\n    if (this.props.cropBot) {\n      box.height -= box.height * this.props.cropBot\n    }\n\n    this.setState(\n      {\n        viewBox: `${box.x} ${box.y} ${box.width} ${box.height}`\n      },\n      () => {\n        if (this.props.onFit) {\n          this.props.onFit(this.state.viewBox)\n        }\n      }\n    )\n  }\n\n  render() {\n    const {\n      children,\n      textStyle,\n      svgStyle,\n      textClassName,\n      svgClassName,\n      font,\n      width,\n      height,\n      preserveAspectRatio\n    } = this.props\n\n    // Merge all text object styles together in one object\n    const fullTextStyle = {\n      ...textStyle\n    }\n    if (font) {\n      fullTextStyle.fontFamily = font\n    }\n\n    return (\n      <svg\n        className={svgClassName}\n        style={svgStyle}\n        viewBox={this.state.viewBox}\n        width={width}\n        height={height}\n        preserveAspectRatio={preserveAspectRatio}\n      >\n        <text\n          x={0}\n          y={0}\n          style={fullTextStyle}\n          className={textClassName}\n          ref={this.textEl}\n        >\n          {children}\n        </text>\n      </svg>\n    )\n  }\n}\n\nTextVice.propTypes = {\n  children: PropTypes.node,\n  textStyle: PropTypes.object,\n  svgStyle: PropTypes.object,\n  textClassName: PropTypes.string,\n  svgClassName: PropTypes.string,\n  font: PropTypes.string,\n  onFit: PropTypes.func,\n  height: PropTypes.string,\n  width: PropTypes.string,\n  preserveAspectRatio: PropTypes.string,\n  cropTop: PropTypes.number,\n  cropBot: PropTypes.number\n}\n\nTextVice.defaultProps = {\n  children: null,\n  textStyle: {},\n  svgStyle: {},\n  textClassName: null,\n  svgClassName: null,\n  font: null,\n  onFit: null,\n  width: '100%',\n  height: '100%',\n  preserveAspectRatio: 'xMidYMid meet',\n  cropTop: null,\n  cropBot: null\n}\n\nexport default TextVice\n","import React from 'react'\nimport TextVice from 'react-text-vice'\nimport \"./style.css\"\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: \"Hello there!\",\n      spacing: 0\n    }\n  }\n\n  handleChange = ({target}) => {\n    this.setState({\n      [target.name] : target.value\n    })\n  }\n\n  render() {\n    const {text, spacing} = this.state;\n    return (\n      <div style={{fontFamily: \"sans-serif\"}}>\n        <div>This text will scale too container width</div>\n\n        <TextVice\n          font=\"Times New Roman, serif\"\n          textStyle={{\n            letterSpacing: `${spacing}px`\n          }}\n        >\n          {text}\n        </TextVice>\n\n        <div>Change Text</div>\n        <input type=\"text\" onChange={this.handleChange} name=\"text\" value={text}/>\n        <br/> <br/>\n        <div>Change Letter Spacing</div>\n        <input type=\"range\" onChange={this.handleChange} name=\"spacing\" value={spacing} step=\"0.01\" min=\"1\" max=\"10\"/>\n\n        <br/> <br/>\n        <div>Using an external font that loads in asynchronously</div>\n        <TextVice\n          textClassName=\"external-font\"\n          textStyle={{\n            letterSpacing: `${spacing}px`\n          }}\n        >\n          {text}\n        </TextVice>\n        <br/><br/>\n        <div>Cropping vertically</div>\n        <TextVice\n          cropTop={0.25}\n          cropBot={0.25}\n          font=\"Arial Black, sans-serif\"\n          textStyle={{\n            letterSpacing: `${spacing}px`\n          }}\n        >\n          {text}\n        </TextVice>\n        <hr/>\n        <a href=\"https://github.com/JonasGruenwald/react-text-vice\">GitHub</a>\n      </div>\n    )\n  }\n}\n\nexport default App\n","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}